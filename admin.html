<!DOCTYPE html>

<html lang="pt-br">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Painel Administrativo - SAB</title>

    <link rel="stylesheet" href="style.css">



</head>

<body>



    <div class="navbar">

        <h1>SAB - Painel da Bibliotecária</h1>

        

        <img src="Logo SAB.png" alt="">

    </div>









    <div class="container-tabela">

        <h2>Controle de Empréstimos Ativos</h2>

        <p>Abaixo estão listados todos os livros retirados pelos alunos.</p>

            <button class="btn-limpar" onclick="limparSistema()">Resetar Sistema</button>
            

 <div id="areaEnvio" style="background: #f0f0f0; padding: 15px; margin: 10px; border-radius: 8px;">
    <h3>Enviar mensagem</h3>

    <input type="text" id="inputTelefone" placeholder="Ex: 5511999999999" style="padding: 8px; width: 200px;">
    
    <input type="text" id="inputMensagem" placeholder="Digite sua mensagem..." style="padding: 8px; width: 300px;">
    
    <button onclick="enviarZap()" style="padding: 8px; background: #25D366; color: white; border: none; cursor: pointer;">Enviar Agora</button>
</div>
        </div> 




        <table>

            <thead>

                <tr>

                    <th>Data</th>

                    <th>Aluno</th>

                    <th>RA</th>

                    <th>Telefone</th>

                    <th>Livro Locado</th>

                    <th>Status</th>

                </tr>

            </thead>

            <tbody id="tabelaCorpo">

            </tbody>

        </table>

        

        <p id="msgVazio" style="text-align: center; margin-top: 20px; color: #666;">Nenhum empréstimo registrado.</p>

    </div>



    <script>

        //  Ler a lista salva na memória

        var listaEmprestimos = JSON.parse(localStorage.getItem("bd_emprestimos") || "[]")

        var corpoTabela = document.getElementById("tabelaCorpo")



        //  Se tiver empréstimos, esconde a mensagem de "Vazio"

        if (listaEmprestimos.length > 0) {

            document.getElementById("msgVazio").style.display = "none"

        }



        // 3. Criar as linhas da tabela para cada empréstimo

        listaEmprestimos.forEach(function(item) {

            var linha = document.createElement("tr")

            

            linha.innerHTML = `

                <td>${item.data}</td>

                <td><strong>${item.aluno}</strong></td>

                <td>${item.ra}</td>

                <td>${item.telefone}</td>

                <td>${item.livro}</td>

                <td><span class="status-badge">${item.status}</span></td>

            `

        

            corpoTabela.appendChild(linha)

        })



        // Função extra para apagar tudo (útil para testes)

        function limparSistema() {

            if(confirm("Tem certeza que deseja apagar todos os registros?")) {

                localStorage.removeItem("bd_emprestimos")

                location.reload() 

            }

        }



        function enviarZap(){
            var telefone = inputTelefone
            var texto = inputMensagem

            if(telefone === "" || texto === ""){
                alert("Porfavor, preencha o telefone e a mensagem!")
                return
            }

         var url = "https://api.whatsapp.com/send?phone=" + telefone + "&text=" + encodeURIComponent(texto)

         window.open(url, "_bla")
        }
    </script>



</body>

</html>







